import{_ as q,u as G,b as F,d as j,e as f,r as v,f as z,o as H,w as l,g as o,a as g,h as t,i as d,t as J}from"./index-DqQHQQl9.js";const K={class:"text-h6"},L={__name:"TeamManagement",setup(O){const b=G(),m=F(),x=j(),c=b.user,V=f(()=>m.users.filter(n=>n.piId===c.id&&["Team Member","Proxy PI"].includes(n.role))),k=f(()=>x.proposals.filter(n=>n.status==="accepted")),r=v(!1),u=v(!1),a=v({email:"",role:"",grants:[]}),T=[{text:"Email",value:"email"},{text:"Role",value:"role"},{text:"Actions",value:"actions",sortable:!1}];function C(){u.value=!1,a.value={email:"",role:"Team Member",grants:[]},r.value=!0}function P(n){u.value=!0,a.value={...n},r.value=!0}function p(){r.value=!1,a.value={email:"",role:"",grants:[]}}function M(){if(a.value.email===""){alert("Please provide a valid email.");return}if(!a.value.grants.length){alert("Please associate at least one grant proposal.");return}u.value?m.updateUser(a.value):(a.value.piId=c.id,m.addUser(a.value)),p()}function U(n){confirm(`Are you sure you want to remove ${n.email} from the team?`)&&m.deleteUser(n.id)}return(n,e)=>{const i=o("v-btn"),y=o("v-data-table"),S=o("v-card-title"),w=o("v-text-field"),_=o("v-select"),A=o("v-form"),D=o("v-card-text"),E=o("v-spacer"),I=o("v-card-actions"),N=o("v-card"),B=o("v-dialog"),R=o("v-container");return H(),z(R,null,{default:l(()=>[e[9]||(e[9]=g("h1",null,"Team Management",-1)),t(i,{color:"primary",onClick:C,class:"mb-4"},{default:l(()=>e[4]||(e[4]=[d("Add Team Member")])),_:1}),t(y,{headers:T,items:V.value,"item-key":"id",class:"elevation-1"},{"item.actions":l(({item:s})=>[t(i,{color:"primary",onClick:$=>P(s)},{default:l(()=>e[5]||(e[5]=[d("Edit")])),_:2},1032,["onClick"]),t(i,{color:"error",onClick:$=>U(s)},{default:l(()=>e[6]||(e[6]=[d("Remove")])),_:2},1032,["onClick"])]),_:1},8,["items"]),t(B,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=s=>r.value=s),"max-width":"600px"},{default:l(()=>[t(N,null,{default:l(()=>[t(S,null,{default:l(()=>[g("span",K,J(u.value?"Edit Team Member":"Add New Team Member"),1)]),_:1}),t(D,null,{default:l(()=>[t(A,{ref:"editForm"},{default:l(()=>[t(w,{modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.email=s),label:"Email",disabled:u.value,required:""},null,8,["modelValue","disabled"]),t(_,{modelValue:a.value.role,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.role=s),items:["Team Member","Proxy PI"],label:"Role",required:""},null,8,["modelValue"]),t(_,{modelValue:a.value.grants,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.grants=s),items:k.value,"item-title":"proposedTitle","item-value":"id",label:"Associated Grant Proposals",multiple:"",chips:""},null,8,["modelValue","items"])]),_:1},512)]),_:1}),t(I,null,{default:l(()=>[t(E),t(i,{color:"blue darken-1",text:"",onClick:p},{default:l(()=>e[7]||(e[7]=[d("Cancel")])),_:1}),t(i,{color:"blue darken-1",text:"",onClick:M},{default:l(()=>e[8]||(e[8]=[d("Save")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},W=q(L,[["__scopeId","data-v-7c4a1c04"]]);export{W as default};
